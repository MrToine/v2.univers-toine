{% extends 'base.html.twig' %}

{% block body %}
<h1 class="title is-1">{{ forum.name }}</h1>
<table class="table is-fullwidth" style="background-color: rgba(0,0,0,0.5);">
	<thead>
		<tr>
			<th class="has-text-light"><i class="fa-solid fa-flag" title="Etat du sujet"></i></th>
			<th class="has-text-light" style="width:60%;text-align:center;"><i class="fa-solid fa-file" title="Titre du sujet"></i></th>
			<th class="has-text-light" style="text-align:center;"><i class="fa-solid fa-comments" title="Nombre de messages"></i></th>
			<th class="has-text-light" style="text-align:center;"><i class="fa-solid fa-user" title="Auteur"></i></th>
			<th class="has-text-light" style="text-align:center;"><i class="fa-solid fa-clock" title="Dernier message"></i></th>
		</tr>
	</thead>
	<tbody>
		{% for topic in topics %}
		    {% if topic.forum is same as(forum) %}
		        {% set post = repositoryPost.getLastPostByTopic(topic) %}
		        <tr>
		            <td></td>
		            <td class="has-text-grey"><a href="{{ path('forum.topic', {id: topic.id}) }}" title="">{{ topic.name }}</a></td>
		            <td class="has-text-grey" style="text-align:center;">1254</td>
		            <td class="has-text-grey" style="text-align:center;">{{ topic.author.displayName }}</td>
		            <td class="has-text-grey">
		                    Le {{ post.createAt | date('d/m/Y Ã  H:i') }}
		            </td>
		        </tr>
		    {% endif %}
		{% endfor %}
	</tbody>
</table>
{# display navigation #}
<div class="pagination is-centered">
    {{ knp_pagination_render(topics) }}
</div>
{% endblock %}
